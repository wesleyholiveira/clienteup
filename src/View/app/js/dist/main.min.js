angular.module("clienteUp",["ngRoute"]);const root="src/View/app",baseUrl=window.location.origin;angular.module("clienteUp").constant("paths",{root:root,js:root+"/js",css:root+"/css",img:root+"/img",templates:root+"/templates",apiURL:"http://localhost/clienteup/app.php"}),angular.module("clienteUp").config(["$httpProvider",function(e){e.interceptors.push("loaderInterceptor")}]),angular.module("clienteUp").config(["$routeProvider","$locationProvider","paths",function(e,t,n){const a=n.templates+"/dist/";e.when("/",{templateUrl:a+"index.html"}).when("/busca",{templateUrl:a+"index.html",controller:"BuscaController"}).when("/como-funciona",{templateUrl:a+"como-funciona.html"}).when("/cliente/meus-pontos",{templateUrl:a+"meus-pontos.html"}).when("/cliente/cadastrar",{templateUrl:a+"cadastrar.html"}).when("/cliente/login",{templateUrl:a+"login.html"}).when("/cliente/pesquisa",{templateUrl:a+"pesquisa.html"}).when("/cliente/pos-venda",{templateUrl:a+"pos-venda.html"}).when("/termos-de-uso",{templateUrl:a+"termos-uso.html"}).when("/brindes",{templateUrl:a+"brindes.html"}).when("/vale-presente",{templateUrl:a+"vale-presente.html"}).when("/sobre-nos",{templateUrl:a+"sobre-nos.html"}).when("/imprensa",{templateUrl:a+"imprensa.html"}).when("/sem-autorizacao",{templateUrl:a+"sem-autorizacao.html"}).when("/404",{templateUrl:a+"404.html"}).otherwise({redirectTo:"/404"})}]),angular.module("clienteUp").controller("AutenticacaoClienteController",["$rootScope","$scope","$location",function(e,t,n){e.logado===!1&&n.path("/sem-autorizacao")}]),angular.module("clienteUp").controller("BuscaController",["$rootScope","$filter","$routeParams","jQueryFactory",function(e,t,n,a){e.matches=!1;var o=[{id:1,nomeEmpresa:"Maná WEB"},{id:2,nomeEmpresa:"Savegnago"},{id:3,nomeEmpresa:"Cojiba"},{id:4,nomeEmpresa:"Usinas Chemicas"},{id:5,nomeEmpresa:"Orto Center"},{id:6,nomeEmpresa:"Docelar Presentes"},{id:7,nomeEmpresa:"Maran Calçados"},{id:8,nomeEmpresa:"Manázius"}];void 0!==n.q&&(e.busca=n.q,e.hasMatches()),e.hasMatches=function(){void 0!==e.busca&&e.busca.length>3?(e.empresas=t("filter")(o,e.busca),e.matches=e.empresas.length):""===e.busca&&(e.matches=!1),$("html, body").animate({scrollTop:0},500)},e.limparBusca=function(){e.busca="",e.matches=!1,e.loader=!1}}]),angular.module("clienteUp").controller("CadastrarController",["$rootScope","$scope","$location","$timeout","$filter","jQueryFactory","clienteAPI","cepAPI",function(e,t,n,a,o,s,r,i){var l=e.storage;t.status=void 0,$('[name^="CPF"]').mask("000.000.000-00"),$('[name^="CEP"]').mask("00000-000"),$('[name^="telefone"]').mask("(00) 0000-0000D",{translation:{D:{pattern:/[0-9]/,optional:!0}}}),t.buscarCEP=function(e){e=o("sanitize")(e),i.getInfos(e).then(function(e){var n=e.data;n.error!==!0?(t.cadastro.cidade=n.localidade,t.cadastro.endereco=n.logradouro):(t.status=!1,t.mensagem="CEP não encontrado.")})},t.cadastrar=function(){r.cadastrar(t.cadastro).then(function(e){t.status=!0,t.mensagem="Cliente cadastrado com sucesso!",r.autenticar(t.cadastro).then(function(e){var t=e.data.mensagem;l.setItem("acessoToken",t),a(function(){return t?void n.path("/cliente/pesquisa"):(n.path("/sem-autorizacao"),!1)},1e3)})},function(e){t.status=!1,t.mensagem=e}),$("html, body").animate({scrollTop:0},500)}}]),angular.module("clienteUp").controller("CuponsController",["$scope","cupomAPI","paths",function(e,t,n){n.img+"/dist";t.listar().then(function(t){e.cupons=t.data},function(e){console.log(e)})}]),angular.module("clienteUp").controller("LoginController",["$rootScope","$scope","$location","clienteAPI",function(e,t,n,a){var o=sessionStorage;t.status=void 0,e.logado===!0&&n.path("/cliente/meus-pontos"),t.enviar=function(){a.autenticar(t.login).then(function(a){t.status=void 0;var s=a.data.mensagem,r=a.data.cliente;o.setItem("acessoToken",s),o.setItem("dadosCliente",r),e.logado=!0,e.cliente=JSON.parse(r),e.cliente.senha="",n.path("/cliente/meus-pontos")},function(n){t.status=!1,e.logado=!1,t.mensagem=n})}}]),angular.module("clienteUp").controller("MeusPontosController",["$scope",function(e){e.meusPontos=[]}]),angular.module("clienteUp").controller("PesquisaController",["$scope","$timeout","clienteAPI",function(e,t,n){e.enviar=function(){n.cadastrarPesquisa(e.pesquisa).then(function(t){e.status=!0,e.mensagem="Pesquisa realizada com sucesso!"},function(t){e.status=!1,e.mensagem=t})}}]),angular.module("clienteUp").controller("PosUpController",["$scope","$timeout","clienteAPI",function(e,t,n){e.enviar=function(){n.cadastrarPosVenda(e.posVenda).then(function(t){e.status=!0,e.mensagem="Pós Venda realizada com sucesso!"},function(t){e.status=!1,e.mensagem=t})}}]),angular.module("clienteUp").controller("PrincipalController",["$rootScope","$scope","$location","jQueryFactory",function(e,t,n,a){var o="Carregando...";e.logado=sessionStorage.getItem("acessoToken")||!1,e.cliente=sessionStorage.getItem("dadosCliente")||!1,e.cliente!==!1&&(e.cliente=JSON.parse(e.cliente),e.cliente.senha=""),e.loading=o,t.topo=function(){$("html, body").animate({scrollTop:0},500)},t.limparLoader=function(){e.loading=o,e.loader=!1},t.sair=function(){sessionStorage.setItem("acessoToken",""),e.logado=!1,e.cliente=!1,n.path("/")}}]),angular.module("clienteUp").filter("sanitize",function(){return function(e){return e.replace(/\D/g,"")}}),angular.module("clienteUp").factory("jQueryFactory",["$window",function(e){return e.$}]),angular.module("clienteUp").factory("loaderInterceptor",["$q","$rootScope","$httpParamSerializer","$location",function(e,t,n,a){return{request:function(e){if(e.url.indexOf("clienteup")>0){var o=/[cliente|empresa]/,s=a.path();s=s.split("/");var r=s.length,i=s[r-2],l=s[r-1];void 0!==i&&o.test(i)&&"login"!==l&&""!==l&&(e.headers["X-Authorization"]=sessionStorage.getItem("acessoToken"))}return"POST"===e.method&&(e.headers["Content-Type"]="application/x-www-form-urlencoded",e.transformRequest=function(e){return n(e)}),t.loader=!0,e},requestError:function(t){return e.reject(t)},response:function(e){return t.loader=!1,e},responseError:function(n){return t.loader=!1,403===n.status&&a.path("/sem-autorizacao"),404===n.status&&a.path("/404"),e.reject("Ocorreu um erro: "+n.data.mensagem+" ["+n.status+"]")}}}]),angular.module("clienteUp").factory("cepAPI",["$http","paths",function(e,t){t.apiURL;return{getInfos:function(t){return e.get("https://viacep.com.br/ws/"+t+"/json/",{cache:!0})}}}]),angular.module("clienteUp").factory("clienteAPI",["$http","paths",function(e,t){const n=t.apiURL;return{cadastrar:function(t){return e.post(n+"/cliente",t)},autenticar:function(t){return e.post(n+"/cliente/login",t)},cadastrarPesquisa:function(t){return e.post(n+"/cliente/pesquisa",t)},cadastrarPosVenda:function(t){return e.post(n+"/cliente/pos-venda",t)}}}]),angular.module("clienteUp").factory("cupomAPI",["$http","paths",function(e,t){const n=t.apiURL;return{listar:function(){return e.get(n+"/cupom",{cache:!0})}}}]),+function(e){"use strict";function t(t){var n,a=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(a)}function n(t){return this.each(function(){var n=e(this),o=n.data("bs.collapse"),s=e.extend({},a.DEFAULTS,n.data(),"object"==typeof t&&t);!o&&s.toggle&&/show|hide/.test(t)&&(s.toggle=!1),o||n.data("bs.collapse",o=new a(this,s)),"string"==typeof t&&o[t]()})}var a=function(t,n){this.$element=e(t),this.options=e.extend({},a.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};a.VERSION="3.3.6",a.TRANSITION_DURATION=350,a.DEFAULTS={toggle:!0},a.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},a.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"),t&&t.transitioning))){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),t||o.data("bs.collapse",null));var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var i=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return i.call(this);var l=e.camelCase(["scroll",r].join("-"));this.$element.one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(a.TRANSITION_DURATION)[r](this.$element[0][l])}}}},a.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(a.TRANSITION_DURATION):o.call(this)}}},a.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},a.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,a){var o=e(a);this.addAriaAndCollapsedClass(t(o),o)},this)).end()},a.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=a,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(a){var o=e(this);o.attr("data-target")||a.preventDefault();var s=t(o),r=s.data("bs.collapse"),i=r?"toggle":o.data();n.call(s,i)})}(jQuery);